<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Diffusion VRAM Calculator</title>
    <style>
        :root {
            /* Light theme variables */
            --bg-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --container-bg: rgba(255, 255, 255, 0.95);
            --panel-bg: white;
            --text-primary: #333;
            --text-secondary: #666;
            --text-light: #555;
            --border-color: rgba(0, 0, 0, 0.05);
            --border-input: #e0e0e0;
            --accent-color: #2a5298;
            --header-gradient: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            --info-bg: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            --warning-bg: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
            --gpu-info-bg: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            --footer-bg: #f8f9fa;
        }

        [data-theme="dark"] {
            /* Dark theme variables */
            --bg-gradient: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            --container-bg: rgba(30, 30, 30, 0.95);
            --panel-bg: #2d2d2d;
            --text-primary: #e0e0e0;
            --text-secondary: #b0b0b0;
            --text-light: #a0a0a0;
            --border-color: rgba(255, 255, 255, 0.1);
            --border-input: #444;
            --accent-color: #4a90e2;
            --header-gradient: linear-gradient(135deg, #0f1419 0%, #1a2332 100%);
            --info-bg: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
            --warning-bg: linear-gradient(135deg, #92400e 0%, #b45309 100%);
            --gpu-info-bg: linear-gradient(135deg, #374151 0%, #4b5563 100%);
            --footer-bg: #1f1f1f;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-gradient);
            min-height: 100vh;
            padding: 20px;
            transition: background 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: var(--container-bg);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            transition: background 0.3s ease;
        }

        .header {
            background: var(--header-gradient);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50px;
            padding: 8px 16px;
            color: white;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            padding: 30px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .theme-toggle {
                position: relative;
                top: auto;
                right: auto;
                margin: 0 auto 20px;
                width: fit-content;
            }
        }

        .panel {
            background: var(--panel-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
            border: 1px solid var(--border-color);
            transition: background 0.3s ease, border-color 0.3s ease;
        }

        .panel h2 {
            color: var(--accent-color);
            margin-bottom: 20px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: color 0.3s ease;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
            transition: color 0.3s ease;
        }

        .form-group select,
        .form-group input[type="range"],
        .form-group input[type="number"] {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-input);
            border-radius: 8px;
            font-size: 1rem;
            background: var(--panel-bg);
            color: var(--text-primary);
            transition: border-color 0.3s ease, background 0.3s ease, color 0.3s ease;
        }

        .form-group select:focus,
        .form-group input:focus {
            border-color: var(--accent-color);
            outline: none;
        }

        .range-container {
            position: relative;
        }

        .range-value {
            background: var(--accent-color);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.9rem;
            float: right;
            margin-top: -35px;
            margin-right: 10px;
        }

        .gpu-info {
            background: var(--gpu-info-bg);
            padding: 15px;
            border-radius: 10px;
            margin-top: 10px;
            transition: background 0.3s ease;
        }

        .vram-bar {
            width: 100%;
            height: 30px;
            background: var(--border-input);
            border-radius: 15px;
            overflow: hidden;
            margin: 15px 0;
            position: relative;
            transition: background 0.3s ease;
        }

        .vram-fill {
            height: 100%;
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            transition: width 0.5s ease, background 0.3s ease;
            border-radius: 15px;
        }

        .vram-warning {
            background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
        }

        .vram-error {
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
        }

        .vram-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .model-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .model-card {
            background: var(--panel-bg);
            border: 2px solid var(--border-input);
            border-radius: 10px;
            padding: 15px;
            transition: all 0.3s ease;
        }

        .model-card.compatible {
            border-color: #4CAF50;
            background: linear-gradient(135deg, #e8f5e8 0%, #f1f8e9 100%);
        }

        [data-theme="dark"] .model-card.compatible {
            background: linear-gradient(135deg, #1b5e20 0%, #2e7d32 100%);
        }

        .model-card.warning {
            border-color: #ff9800;
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
        }

        [data-theme="dark"] .model-card.warning {
            background: linear-gradient(135deg, #e65100 0%, #ff9800 100%);
        }

        .model-card.incompatible {
            border-color: #f44336;
            background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
            opacity: 0.6;
        }

        [data-theme="dark"] .model-card.incompatible {
            background: linear-gradient(135deg, #b71c1c 0%, #d32f2f 100%);
        }

        .model-name {
            font-weight: bold;
            color: var(--accent-color);
            margin-bottom: 5px;
            transition: color 0.3s ease;
        }

        .model-requirement {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 5px;
            transition: color 0.3s ease;
        }

        .model-status {
            font-size: 0.85rem;
            font-weight: bold;
            padding: 4px 8px;
            border-radius: 4px;
            display: inline-block;
            margin-top: 5px;
        }

        .status-compatible {
            background: #4CAF50;
            color: white;
        }

        .status-warning {
            background: #ff9800;
            color: white;
        }

        .status-incompatible {
            background: #f44336;
            color: white;
        }

        .workflow-section {
            grid-column: 1 / -1;
            margin-top: 30px;
        }

        .workflow-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .workflow-card {
            background: var(--panel-bg);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
            border: 1px solid var(--border-color);
            transition: transform 0.3s ease, background 0.3s ease, border-color 0.3s ease;
        }

        .workflow-card:hover {
            transform: translateY(-5px);
        }

        .workflow-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--accent-color);
            margin-bottom: 10px;
            transition: color 0.3s ease;
        }

        .workflow-description {
            color: var(--text-secondary);
            margin-bottom: 15px;
            line-height: 1.5;
            transition: color 0.3s ease;
        }

        .workflow-specs {
            background: var(--gpu-info-bg);
            padding: 10px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--text-light);
            transition: background 0.3s ease, color 0.3s ease;
        }

        .info-box {
            background: var(--info-bg);
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
            color: var(--text-primary);
            transition: background 0.3s ease, color 0.3s ease;
        }

        .warning-box {
            background: var(--warning-bg);
            border-left: 4px solid #ff9800;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
            color: var(--text-primary);
            transition: background 0.3s ease, color 0.3s ease;
        }

        .footer {
            background: var(--footer-bg);
            padding: 20px;
            text-align: center;
            color: var(--text-secondary);
            border-top: 1px solid var(--border-input);
            transition: background 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }

        .footer a {
            color: var(--accent-color);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        .icon {
            width: 20px;
            height: 20px;
            margin-right: 5px;
        }

        .estimate-info {
            background: linear-gradient(135deg, #e8f5e8 0%, #f1f8e9 100%);
            border: 1px solid #4CAF50;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            transition: background 0.3s ease;
        }

        [data-theme="dark"] .estimate-info {
            background: linear-gradient(135deg, #1b5e20 0%, #2e7d32 100%);
        }

        .estimate-title {
            font-weight: bold;
            color: #2e7d32;
            margin-bottom: 10px;
        }

        [data-theme="dark"] .estimate-title {
            color: #81c784;
        }

        .estimate-detail {
            margin: 5px 0;
            color: #388e3c;
        }

        [data-theme="dark"] .estimate-detail {
            color: #a5d6a7;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <button class="theme-toggle" id="theme-toggle">
                <span id="theme-icon">üåô</span>
                <span id="theme-text">Dark</span>
            </button>
            <h1>üé¨ Video Diffusion VRAM Calculator</h1>
            <p>Estimate VRAM requirements for the latest video diffusion models including Wan 2.2, HunyuanVideo, Humo, and classic models like AnimateDiff & SVD</p>
        </div>

        <div class="main-content">
            <div class="panel">
                <h2>
                    <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M9 16.17l-4.17-4.17L3.41 13.42L9 19l12-12-1.41-1.42z"/>
                    </svg>
                    Hardware Configuration
                </h2>

                <div class="form-group">
                    <label for="gpu-select">Select Your GPU:</label>
                    <select id="gpu-select">
                        <option value="custom">Custom VRAM Amount</option>
                        <optgroup label="RTX 50 Series (2025)">
                            <option value="32">RTX 5090 (32GB GDDR7)</option>
                            <option value="16">RTX 5080 (16GB GDDR7)</option>
                            <option value="16">RTX 5070 Ti (16GB GDDR7)</option>
                            <option value="12">RTX 5070 (12GB GDDR7)</option>
                        </optgroup>
                        <optgroup label="RTX 40 Series">
                            <option value="24">RTX 4090 (24GB)</option>
                            <option value="16">RTX 4080 / 4080 Super (16GB)</option>
                            <option value="12">RTX 4070 Ti / 4070 Ti Super / 4070 (12GB)</option>
                            <option value="16">RTX 4060 Ti 16GB (16GB)</option>
                            <option value="8">RTX 4060 Ti / 4060 (8GB)</option>
                        </optgroup>
                        <optgroup label="RTX 30 Series">
                            <option value="24">RTX 3090 / 3090 Ti (24GB)</option>
                            <option value="12">RTX 3080 Ti / 3060 12GB (12GB)</option>
                            <option value="10">RTX 3080 10GB (10GB)</option>
                            <option value="8">RTX 3070 Ti / 3070 / 3060 Ti (8GB)</option>
                        </optgroup>
                        <optgroup label="RTX 20 Series">
                            <option value="11">RTX 2080 Ti (11GB)</option>
                            <option value="8">RTX 2080 / 2070 Super (8GB)</option>
                            <option value="6">RTX 2060 Super (8GB)</option>
                        </optgroup>
                        <optgroup label="AMD Radeon">
                            <option value="24">RX 7900 XTX (24GB)</option>
                            <option value="20">RX 7900 XT (20GB)</option>
                            <option value="16">RX 7800 XT (16GB)</option>
                            <option value="12">RX 7700 XT (12GB)</option>
                            <option value="16">RX 6800 XT / 6900 XT (16GB)</option>
                        </optgroup>
                    </select>
                </div>

                <div class="form-group" id="custom-vram-group" style="display: none;">
                    <label for="custom-vram">Custom VRAM (GB):</label>
                    <input type="number" id="custom-vram" min="1" max="128" value="8">
                </div>

                <div class="gpu-info">
                    <div id="gpu-info-text">Select your GPU to see specifications</div>
                    <div class="vram-bar">
                        <div class="vram-fill" id="vram-fill"></div>
                        <div class="vram-text" id="vram-text">0% Used</div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="resolution">Video Resolution:</label>
                    <select id="resolution">
                        <option value="0.39">512√ó768 (0.39MP)</option>
                        <option value="0.59" selected>576√ó1024 (0.59MP) - SVD Recommended</option>
                        <option value="0.59">1024√ó576 (0.59MP) - Landscape</option>
                        <option value="0.79">768√ó1024 (0.79MP)</option>
                        <option value="1.05">1024√ó1024 (1.05MP)</option>
                        <option value="2.07">1280√ó1600 (2.07MP)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="frames">Frame Count: <span class="range-value" id="frames-value">16</span></label>
                    <div class="range-container">
                        <input type="range" id="frames" min="8" max="32" value="16" step="1">
                    </div>
                </div>

                <div class="form-group">
                    <label for="batch-size">Batch Size: <span class="range-value" id="batch-value">1</span></label>
                    <div class="range-container">
                        <input type="range" id="batch-size" min="1" max="4" value="1" step="1">
                    </div>
                </div>

                <div class="form-group">
                    <label for="precision">Model Precision:</label>
                    <select id="precision">
                        <option value="1.0" selected>FP16 (Recommended)</option>
                        <option value="2.0">FP32 (Higher Quality)</option>
                        <option value="0.5">INT8 (Experimental)</option>
                    </select>
                </div>
            </div>

            <div class="panel">
                <h2>
                    <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                    Model Compatibility
                </h2>

                <div class="estimate-info">
                    <div class="estimate-title">Current Estimate:</div>
                    <div class="estimate-detail" id="current-estimate">VRAM Usage: calculating...</div>
                    <div class="estimate-detail" id="overhead-estimate">System Overhead: calculating...</div>
                    <div class="estimate-detail" id="total-estimate">Total Required: calculating...</div>
                </div>

                <div class="model-grid" id="model-compatibility">
                    <!-- Model cards will be generated by JavaScript -->
                </div>
            </div>

            <div class="workflow-section panel">
                <h2>
                    <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM13 17h-2v-6h2v6zm0-8h-2V7h2v2z"/>
                    </svg>
                    ComfyUI Workflow Templates
                </h2>

                <div class="info-box">
                    <strong>üí° Getting Started (Updated Nov 2025):</strong> These workflows include the newest video generation models released in 2025. 
                    <strong>New highlights:</strong> Wan 2.2 series with MoE architecture, HunyuanVideo-13B with temporal tiling, 
                    and Humo human-centric generation. RTX 50-series GPUs with GDDR7 provide significant speed improvements. 
                    Download ComfyUI and explore quantized models for lower VRAM requirements.
                </div>

                <div class="workflow-grid">
                    <div class="workflow-card">
                        <div class="workflow-title">üöÄ Wan 2.2 Text-to-Video (Latest)</div>
                        <div class="workflow-description">
                            State-of-the-art text-to-video generation using Mixture-of-Experts architecture for cinematic quality at 720P@24fps.
                        </div>
                        <div class="workflow-specs">
                            <strong>Requirements:</strong> 16-24GB VRAM<br>
                            <strong>Models:</strong> Wan 2.2 T2V-A14B (MoE)<br>
                            <strong>Output:</strong> 720P (1280√ó720), 24fps, 5 seconds
                        </div>
                    </div>

                    <div class="workflow-card">
                        <div class="workflow-title">üéØ Wan 2.2 Hybrid TI2V (Efficient)</div>
                        <div class="workflow-description">
                            Unified text+image-to-video model with high compression VAE, fastest 720P generation available.
                        </div>
                        <div class="workflow-specs">
                            <strong>Requirements:</strong> 8-24GB VRAM<br>
                            <strong>Models:</strong> Wan 2.2 TI2V-5B + Wan2.2-VAE<br>
                            <strong>Output:</strong> 720P, under 9 minutes on RTX 4090
                        </div>
                    </div>

                    <div class="workflow-card">
                        <div class="workflow-title">üéôÔ∏è Wan 2.2 Speech-to-Video</div>
                        <div class="workflow-description">
                            Audio-driven cinematic video generation model that syncs speech with visual content.
                        </div>
                        <div class="workflow-specs">
                            <strong>Requirements:</strong> 16-32GB VRAM<br>
                            <strong>Models:</strong> Wan 2.2 S2V-14B + Audio Encoder<br>
                            <strong>Output:</strong> 480P/720P with audio sync
                        </div>
                    </div>

                    <div class="workflow-card">
                        <div class="workflow-title">üé¨ HunyuanVideo (13B Params)</div>
                        <div class="workflow-description">
                            Largest open-source text-to-video model with temporal tiling support for low VRAM usage.
                        </div>
                        <div class="workflow-specs">
                            <strong>Requirements:</strong> 8-24GB VRAM (with tiling)<br>
                            <strong>Models:</strong> HunyuanVideo-13B + Temporal Tiling<br>
                            <strong>Output:</strong> 848√ó480, 73 frames, 5-6 minutes
                        </div>
                    </div>

                    <div class="workflow-card">
                        <div class="workflow-title">üë§ Humo Human-Centric</div>
                        <div class="workflow-description">
                            ByteDance's human-focused video generation with multimodal conditioning (text, image, audio).
                        </div>
                        <div class="workflow-specs">
                            <strong>Requirements:</strong> 24-32GB VRAM<br>
                            <strong>Models:</strong> Humo-17B + Multimodal Encoders<br>
                            <strong>Output:</strong> 480P/720P, 4 seconds, incredible lip-sync
                        </div>
                    </div>

                    <div class="workflow-card">
                        <div class="workflow-title">üéûÔ∏è Wan 2.2 Animate (Long Videos)</div>
                        <div class="workflow-description">
                            Motion transfer from reference videos to animate characters in images, supports 30+ second videos.
                        </div>
                        <div class="workflow-specs">
                            <strong>Requirements:</strong> 16-32GB VRAM, 48GB RAM<br>
                            <strong>Models:</strong> Wan 2.2 Animate + Motion Transfer<br>
                            <strong>Output:</strong> Variable resolution, 30+ seconds
                        </div>
                    </div>

                    <div class="workflow-card">
                        <div class="workflow-title">üìπ Basic Text-to-Video (AnimateDiff)</div>
                        <div class="workflow-description">
                            Generate short video clips from text prompts using AnimateDiff with Stable Diffusion 1.5 base models.
                        </div>
                        <div class="workflow-specs">
                            <strong>Requirements:</strong> 8-12GB VRAM<br>
                            <strong>Models:</strong> SD 1.5 + AnimateDiff Motion Module<br>
                            <strong>Output:</strong> 512√ó768, 16 frames, 2-4 seconds
                        </div>
                    </div>

                    <div class="workflow-card">
                        <div class="workflow-title">üñºÔ∏è Image-to-Video (Stable Video Diffusion)</div>
                        <div class="workflow-description">
                            Transform static images into dynamic video sequences with natural motion using SVD.
                        </div>
                        <div class="workflow-specs">
                            <strong>Requirements:</strong> 8-16GB VRAM<br>
                            <strong>Models:</strong> SVD or SVD-XT<br>
                            <strong>Output:</strong> 576√ó1024, 14-25 frames
                        </div>
                    </div>

                    <div class="workflow-card">
                        <div class="workflow-title">üé® Text-to-Video with SDXL</div>
                        <div class="workflow-description">
                            High-quality text-to-video generation combining SDXL image generation with SVD animation.
                        </div>
                        <div class="workflow-specs">
                            <strong>Requirements:</strong> 16-24GB VRAM<br>
                            <strong>Models:</strong> SDXL + SVD-XT<br>
                            <strong>Output:</strong> 1024√ó576, 25 frames
                        </div>
                    </div>

                    <div class="workflow-card">
                        <div class="workflow-title">üé≠ ControlNet Video</div>
                        <div class="workflow-description">
                            Precise motion control using ControlNet with AnimateDiff for guided video generation.
                        </div>
                        <div class="workflow-specs">
                            <strong>Requirements:</strong> 12-20GB VRAM<br>
                            <strong>Models:</strong> SD 1.5 + AnimateDiff + ControlNet<br>
                            <strong>Output:</strong> 512√ó768, 16 frames
                        </div>
                    </div>

                    <div class="workflow-card">
                        <div class="workflow-title">üîÑ Video-to-Video</div>
                        <div class="workflow-description">
                            Transform existing videos with new styles while preserving motion using video-to-video techniques.
                        </div>
                        <div class="workflow-specs">
                            <strong>Requirements:</strong> 10-16GB VRAM<br>
                            <strong>Models:</strong> AnimateDiff + ControlNet<br>
                            <strong>Output:</strong> Variable resolution, 16-32 frames
                        </div>
                    </div>

                    <div class="workflow-card">
                        <div class="workflow-title">üì∑ Motion LoRA Camera</div>
                        <div class="workflow-description">
                            Add professional camera movements (pan, zoom, orbit) to your video generations.
                        </div>
                        <div class="workflow-specs">
                            <strong>Requirements:</strong> 8-12GB VRAM<br>
                            <strong>Models:</strong> AnimateDiff + Motion LoRA<br>
                            <strong>Output:</strong> 512√ó768, 16 frames
                        </div>
                    </div>
                </div>

                <div class="warning-box">
                    <strong>‚ö†Ô∏è Important Notes (Updated Nov 2025):</strong>
                    <ul style="margin-top: 10px; margin-left: 20px;">
                        <li><strong>Wan 2.2 series:</strong> Latest models with MoE architecture offer better quality with similar VRAM usage</li>
                        <li><strong>HunyuanVideo temporal tiling:</strong> Allows 13B model to run on 8GB VRAM (vs original 48GB requirement)</li>
                        <li><strong>GGUF quantization:</strong> Q4/Q8 variants significantly reduce VRAM at slight quality cost</li>
                        <li><strong>RTX 50-series benefits:</strong> GDDR7 memory provides faster generation times</li>
                        <li>Model offloading and FP8 precision can reduce VRAM usage by 30-50%</li>
                        <li>Batch processing multiple videos simultaneously increases VRAM needs proportionally</li>
                        <li>Generation speed depends on both VRAM capacity and GPU compute capability</li>
                        <li><strong>ComfyUI optimizations:</strong> Latest versions include advanced memory management features</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>This calculator provides estimates based on community testing and official model requirements. Actual VRAM usage may vary depending on your specific setup and optimizations.</p>
            <p>For the latest models and workflows, visit the <a href="https://github.com/comfyanonymous/ComfyUI" target="_blank">ComfyUI GitHub</a> and <a href="https://civitai.com" target="_blank">CivitAI</a>.</p>
        </div>
    </div>

    <script>
        // Video diffusion models with their VRAM requirements (Updated Nov 2025)
        const models = [
            // Latest Models (2025)
            {
                name: "Wan 2.2 T2V-A14B (MoE)",
                minVram: 16,
                recommendedVram: 24,
                description: "Latest text-to-video, 720P@24fps, MoE architecture",
                factors: ["resolution", "frames", "batch"]
            },
            {
                name: "Wan 2.2 I2V-A14B (MoE)",
                minVram: 16,
                recommendedVram: 24,
                description: "Latest image-to-video, reduced camera movements",
                factors: ["resolution", "frames", "batch"]
            },
            {
                name: "Wan 2.2 TI2V-5B (Hybrid)",
                minVram: 8,
                recommendedVram: 24,
                description: "Text+Image-to-video, high compression VAE",
                factors: ["resolution", "frames"]
            },
            {
                name: "Wan 2.2 S2V-14B (Audio)",
                minVram: 16,
                recommendedVram: 32,
                description: "Speech-to-video generation",
                factors: ["resolution", "frames", "batch"]
            },
            {
                name: "Wan 2.2 Animate",
                minVram: 16,
                recommendedVram: 32,
                description: "Long video generation (30+ seconds)",
                factors: ["resolution", "frames", "batch"]
            },
            {
                name: "HunyuanVideo-13B",
                minVram: 8,
                recommendedVram: 24,
                description: "13B params, 720P, temporal tiling support",
                factors: ["resolution", "frames", "batch"]
            },
            {
                name: "HunyuanVideo (GGUF Q8)",
                minVram: 12,
                recommendedVram: 16,
                description: "8-bit quantized version",
                factors: ["resolution", "frames"]
            },
            {
                name: "HunyuanVideo (GGUF Q4)",
                minVram: 6,
                recommendedVram: 12,
                description: "4-bit quantized, lower quality",
                factors: ["resolution", "frames"]
            },
            {
                name: "Humo-17B (Human-Centric)",
                minVram: 24,
                recommendedVram: 32,
                description: "ByteDance human video generation",
                factors: ["resolution", "frames", "batch"]
            },
            {
                name: "HunyuanCustom",
                minVram: 24,
                recommendedVram: 80,
                description: "Subject-driven consistent video generation",
                factors: ["resolution", "frames", "batch"]
            },
            // Classic Models
            {
                name: "AnimateDiff (SD 1.5)",
                minVram: 8,
                recommendedVram: 12,
                description: "Text-to-video with motion modules",
                factors: ["resolution", "frames", "batch"]
            },
            {
                name: "AnimateDiff (SDXL)",
                minVram: 12,
                recommendedVram: 20,
                description: "High-quality text-to-video",
                factors: ["resolution", "frames", "batch"]
            },
            {
                name: "Stable Video Diffusion",
                minVram: 8,
                recommendedVram: 16,
                description: "Image-to-video generation",
                factors: ["resolution", "frames"]
            },
            {
                name: "SVD-XT (25 frames)",
                minVram: 12,
                recommendedVram: 20,
                description: "Extended frame SVD model",
                factors: ["resolution", "frames"]
            },
            {
                name: "VideoCrafter",
                minVram: 10,
                recommendedVram: 16,
                description: "High-quality video synthesis",
                factors: ["resolution", "frames", "batch"]
            },
            {
                name: "AnimateDiff + ControlNet",
                minVram: 12,
                recommendedVram: 20,
                description: "Controlled motion generation",
                factors: ["resolution", "frames", "batch"]
            },
            {
                name: "Video2Video AnimateDiff",
                minVram: 10,
                recommendedVram: 16,
                description: "Video-to-video transformation",
                factors: ["resolution", "frames", "batch"]
            },
            {
                name: "Motion LoRA",
                minVram: 8,
                recommendedVram: 12,
                description: "Camera movement control",
                factors: ["resolution", "frames"]
            }
        ];

        // Get DOM elements
        const gpuSelect = document.getElementById('gpu-select');
        const customVramGroup = document.getElementById('custom-vram-group');
        const customVramInput = document.getElementById('custom-vram');
        const resolutionSelect = document.getElementById('resolution');
        const framesSlider = document.getElementById('frames');
        const framesValue = document.getElementById('frames-value');
        const batchSlider = document.getElementById('batch-size');
        const batchValue = document.getElementById('batch-value');
        const precisionSelect = document.getElementById('precision');
        const gpuInfoText = document.getElementById('gpu-info-text');
        const vramFill = document.getElementById('vram-fill');
        const vramText = document.getElementById('vram-text');
        const modelCompatibility = document.getElementById('model-compatibility');
        const currentEstimate = document.getElementById('current-estimate');
        const overheadEstimate = document.getElementById('overhead-estimate');
        const totalEstimate = document.getElementById('total-estimate');

        // Event listeners
        gpuSelect.addEventListener('change', updateGPUInfo);
        customVramInput.addEventListener('input', updateCalculations);
        resolutionSelect.addEventListener('change', updateCalculations);
        framesSlider.addEventListener('input', updateFrames);
        batchSlider.addEventListener('input', updateBatch);
        precisionSelect.addEventListener('change', updateCalculations);

        function updateGPUInfo() {
            const selectedValue = gpuSelect.value;
            
            if (selectedValue === 'custom') {
                customVramGroup.style.display = 'block';
                gpuInfoText.textContent = 'Custom GPU configuration';
            } else {
                customVramGroup.style.display = 'none';
                const vram = parseInt(selectedValue);
                gpuInfoText.textContent = `Selected GPU has ${vram}GB VRAM`;
            }
            
            updateCalculations();
        }

        function updateFrames() {
            framesValue.textContent = framesSlider.value;
            updateCalculations();
        }

        function updateBatch() {
            batchValue.textContent = batchSlider.value;
            updateCalculations();
        }

        function getCurrentVRAM() {
            if (gpuSelect.value === 'custom') {
                return parseInt(customVramInput.value) || 8;
            }
            return parseInt(gpuSelect.value) || 8;
        }

        function calculateVRAMUsage() {
            const resolution = parseFloat(resolutionSelect.value);
            const frames = parseInt(framesSlider.value);
            const batch = parseInt(batchSlider.value);
            const precision = parseFloat(precisionSelect.value);

            // Base calculation: resolution * frames * batch * precision factor
            // This is a simplified model based on community testing
            const baseUsage = resolution * frames * batch * precision;
            
            // Add model overhead (typically 3-6GB for the base model)
            const modelOverhead = 4;
            
            // System overhead (ComfyUI + Python + OS)
            const systemOverhead = 2;
            
            return {
                model: baseUsage + modelOverhead,
                system: systemOverhead,
                total: baseUsage + modelOverhead + systemOverhead
            };
        }

        function updateCalculations() {
            const currentVRAM = getCurrentVRAM();
            const usage = calculateVRAMUsage();
            
            // Update estimates
            currentEstimate.textContent = `Model VRAM: ${usage.model.toFixed(1)}GB`;
            overheadEstimate.textContent = `System Overhead: ${usage.system.toFixed(1)}GB`;
            totalEstimate.textContent = `Total Required: ${usage.total.toFixed(1)}GB`;
            
            // Update VRAM bar
            const percentage = Math.min((usage.total / currentVRAM) * 100, 100);
            vramFill.style.width = `${percentage}%`;
            vramText.textContent = `${percentage.toFixed(1)}% Used (${usage.total.toFixed(1)}GB / ${currentVRAM}GB)`;
            
            // Update bar color based on usage
            vramFill.className = 'vram-fill';
            if (percentage > 95) {
                vramFill.classList.add('vram-error');
            } else if (percentage > 80) {
                vramFill.classList.add('vram-warning');
            }
            
            updateModelCompatibility(currentVRAM, usage.total);
        }

        function updateModelCompatibility(currentVRAM, estimatedUsage) {
            modelCompatibility.innerHTML = '';
            
            models.forEach(model => {
                const card = document.createElement('div');
                card.className = 'model-card';
                
                let status, statusClass, statusText;
                
                if (currentVRAM >= model.recommendedVram) {
                    status = 'compatible';
                    statusClass = 'status-compatible';
                    statusText = '‚úÖ Optimal';
                    card.classList.add('compatible');
                } else if (currentVRAM >= model.minVram) {
                    status = 'warning';
                    statusClass = 'status-warning';
                    statusText = '‚ö†Ô∏è Minimum';
                    card.classList.add('warning');
                } else {
                    status = 'incompatible';
                    statusClass = 'status-incompatible';
                    statusText = '‚ùå Insufficient';
                    card.classList.add('incompatible');
                }
                
                card.innerHTML = `
                    <div class="model-name">${model.name}</div>
                    <div class="model-requirement">Min: ${model.minVram}GB | Recommended: ${model.recommendedVram}GB</div>
                    <div class="model-requirement">${model.description}</div>
                    <div class="model-status ${statusClass}">${statusText}</div>
                `;
                
                modelCompatibility.appendChild(card);
            });
        }

        // Initialize the calculator
        updateGPUInfo();
        updateCalculations();

        // Theme toggle functionality
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');
        const themeText = document.getElementById('theme-text');
        const htmlElement = document.documentElement;

        // Check for saved theme preference or default to 'light'
        const currentTheme = localStorage.getItem('theme') || 'light';
        htmlElement.setAttribute('data-theme', currentTheme);
        updateThemeToggle(currentTheme);

        themeToggle.addEventListener('click', () => {
            const currentTheme = htmlElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            htmlElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeToggle(newTheme);
        });

        function updateThemeToggle(theme) {
            if (theme === 'dark') {
                themeIcon.textContent = '‚òÄÔ∏è';
                themeText.textContent = 'Light';
            } else {
                themeIcon.textContent = 'üåô';
                themeText.textContent = 'Dark';
            }
        }
    </script>
</body>
</html>
